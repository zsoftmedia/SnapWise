/* -------------------------------------------------------
   WRAPPER
------------------------------------------------------- */
.plan-wrapper {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
}

/* -------------------------------------------------------
   PANZOOM INNER LAYER (HOST)
------------------------------------------------------- */
.plan-inner {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
  background-color: var(--mv-sidebar-bg, #020617);
}

/* When adding a pin â†’ show crosshair cursor */
.add-pin-active {
  cursor: crosshair !important;
}

/* -------------------------------------------------------
   GRID BACKGROUND
------------------------------------------------------- */
.plan-grid {
  position: absolute;
  inset: 0;
  z-index: 0;

  background-image:
    linear-gradient(to right, rgba(80, 80, 120, 0.45) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(80, 80, 120, 0.45) 1px, transparent 1px);
  background-size: 22px 22px;

  pointer-events: none;
}

/* -------------------------------------------------------
   IMAGE
------------------------------------------------------- */
.plan-image {
  width: 100%;
  height: auto;
  max-height: 100%;
  object-fit: contain;
  display: block;
  margin: 0 auto;

  position: relative;
  z-index: 1;
  pointer-events: none;
}

/* -------------------------------------------------------
   CROSSHAIR LINES
------------------------------------------------------- */
.crosshair-line {
  position: absolute;
  background: rgba(255, 0, 0, 0.9);
  z-index: 9999;
  pointer-events: none;
}

.crosshair-line.vertical {
  width: 2px;
  height: 100%;
  top: 0;
}

.crosshair-line.horizontal {
  height: 2px;
  width: 100%;
  left: 0;
}

/* -------------------------------------------------------
   CROSSHAIR ICON
------------------------------------------------------- */
.crosshair-icon {
  position: absolute;
  transform: translate(-50%, -100%);
  color: #ff0000;
  font-size: 46px;
  z-index: 10000;
  pointer-events: none;
  filter: drop-shadow(0 0 4px rgba(255,0,0,0.7));
}

/* -------------------------------------------------------
   PIN ELEMENT
------------------------------------------------------- */
.pin {
  position: absolute;
  transform: translate(-50%, -100%);
  z-index: 300;
}

/* PIN marker shape */
.pin-icon {
  width: 38px;
  height: 38px;
  background: #0ea5e9;
  color: white;
  border-radius: 50% 50% 50% 0;
  transform: rotate(-45deg);
  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 18px;
  border: 2px solid white;

  box-shadow: 0 3px 10px rgba(0,0,0,0.25);
  transition: 0.2s ease;
   z-index: 301
}

.pin-icon .sl-icon {
  transform: rotate(45deg);
}

/* when selected */
.pin.open .pin-icon {
  animation: pin-bounce 0.28s ease-out;
  transform: rotate(-45deg) scale(1.2);
}

/* bounce animation */
@keyframes pin-bounce {
  0%   { transform: rotate(-45deg) scale(0.8); }
  60%  { transform: rotate(-45deg) scale(1.25); }
  100% { transform: rotate(-45deg) scale(1.2); }
}

/* number under pin */
.pin-number {
  transform: rotate(45deg);
  position: absolute;
  bottom: -20px;
  font-size: 13px;
  font-weight: 600;
  color: #0f172a;
}

/* -------------------------------------------------------
   PIN ACTION BUTTONS
------------------------------------------------------- */
.pin-actions {
  position: absolute;
  top: -48px;
  left: 50%;
  transform: translateX(-50%) translateY(8px);

  display: flex;
  gap: 6px;

  opacity: 0;
  pointer-events: none;

  /* <<< FIX 1: extremely high z-index >>> */
    z-index: 100000;

  /* <<< FIX 2: create a new stacking context >>> */
  isolation: isolate;

  /* <<< FIX 3: Let the action bar float above transforms >>> */
  will-change: transform, opacity;

  transition: opacity 0.22s ease, transform 0.22s ease;
}

/* visible */
.pin-actions.show {
  opacity: 1;
  pointer-events: auto;
  transform: translateX(-50%) translateY(0px);
}

/* buttons */
.pin-action {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: 1px solid #ccc;
  background: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;

  /* HELP prevent overlap issues */
  z-index: 2;
}

.pin-action:active {
  transform: scale(0.92);
}

/* -------------------------------------------------------
   RESPONSIVE
------------------------------------------------------- */
@media (max-width: 768px) {
  .pin-icon {
    width: 28px;
    height: 28px;
  }
}
